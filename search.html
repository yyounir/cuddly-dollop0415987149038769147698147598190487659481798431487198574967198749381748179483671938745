<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Start</title>
    <link rel="stylesheet" href="searchstyles.css">
    <link rel="stylesheet" href="styles.css">

    

    <!-- FAVICON -->
		<link rel="shortcut icon" href = "icon.png">
		<link rel="icon" type="icon.png" sizes = "32x32" href = "iconSmall.png">
		<link rel="aple-touch-icon" sizes = "180x180" href = "icon.png">
		<link rel="icon" sizes = "192x192" href = "icon.png">

        <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,300,0,0" />

    <!-- <script type="text/javascript" src="script.js"></script> -->

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <meta name="robots" content="noindex">
</head>
<body>
    <header  class = "sticky-header">        
        <div class="header-right">
				
            <div class="dropdown" style="float:right;">
                <a class="material-symbols-rounded">more_vert</a>
                <div class="dropdown-content">
                    <a onclick="openPopup()">&nbsp;&nbsp;About</a><br>		
                    <a href="https://yyounir.github.io/yyportfolio/YY.html" target="blank">&nbsp;&nbsp;Portfolio</a><br>		
                    <a href="www.linkedin.com/in/yasir-younus-91551a281" target="blank">&nbsp;&nbsp;View LinkedIn Profile&nbsp;&nbsp;</a><br>			
                </div>
            </div>

        </div>
    
    </header>
    <div class="padding-body">
        <div class="main-content">        
            <h1>Hello there!<br>Nice to see you again!</h1>
            <!-- <p>Scroll down to see the sticky search bar.</p> -->
            <!-- Add more content here to make the page scrollable -->
            <!-- <div style="height: 1000px;"></div>
            <p>End of scrollable content.</p> -->
        </div>
        <div class="main-content">
            <div id="geminiResponseContainer" class="gemini-response-container">What can I help you with?</div>
        </div>
        <div class="main-content">
            <img src="Genes.png" class="image-short">
        </div>

        
        <div id = "card-unfilled">
			
		<!-- <center><p class = "title2"><b>Quick Links</b></p></center> -->
        <div class="apps-container">
            <!-- Card 5: Calculator -->
            <div class="app-card">
                <center>
                <a href="https://brightspace.cuny.edu/d2l/home" target="blank"><img src="d2l.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://brightspace.cuny.edu/d2l/home" target="blank">CUNY Brightspace</a>
            </center>
            </div>

            <div class="app-card">
                <center>
                <a href="http://home.cunyfirst.cuny.edu/" target="blank"><img src="cuny.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="http://home.cunyfirst.cuny.edu/" target="blank">CUNY First</a>
            </center>
            </div>

            <div class="app-card">
                <center>
                <a href="https://sb.cunyfirst.cuny.edu/criteria.jsp" target="blank"><img src="cuny.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://sb.cunyfirst.cuny.edu/criteria.jsp" target="blank">Schedule Builder</a>
            </center>
            </div>

            <div class="app-card">
                <center>
                <a href="https://lehman-undergraduate.catalog.cuny.edu/courses?sortBy=code" target="blank"><img src="lc.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://lehman-undergraduate.catalog.cuny.edu/courses?sortBy=code" target="blank">Course Catalog</a>
            </center>
            </div>
        </div></div>

        <!-- <div class="input-wrapper">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="Search something..."
                    class="search-input"
                    autocomplete="off"
                >
                
                <div
                    id="suggestionsContainer"
                    class="suggestions-container"
                >
                <a class = "action-button-filled" href = "https://yyounir.github.io/pingpong//pingpong.html" c><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;Open Link&nbsp;&nbsp;&nbsp;&nbsp;</b></a>
                    
                </div>
            </div> -->

        <center><p class = "title2"><b>Frequent</b></p></center>
        <div class="apps-container">
            <div class="app-card">
                <center>
                <a href="https://copilot.microsoft.com/" target="blank"><img src="Microsoft_Copilot.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://copilot.microsoft.com/" target="blank">Copilot</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://discord.com/" target="blank"><img src="discord-logo-1-1.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://discord.com/" target="blank">Discord</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://gemini.google.com/" target="blank"><img src="geminini.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://gemini.google.com/" target="blank">Gemini</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://mail.google.com/" target="blank"><img src="gmail.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://mail.google.com/" target="blank">Gmail</a>
            </center>
            </div>

            <div class="app-card">
                <center>
                <a href="https://calendar.google.com/" target="blank"><img src="gcalendar.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://calendar.google.com/" target="blank">Google Calendar</a>
            </center>
            </div>

            <div class="app-card">
                <center>
                <a href="https://drive.google.com/" target="blank"><img src="GoogleDrive.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://drive.google.com/" target="blank">Google Drive</a>
            </center>
            </div>             
        </div>

        <div class="apps-container">
            <div class="app-card">
                <center>
                <a href="https://docs.google.com/" target="blank"><img src="gdocs.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://docs.google.com/" target="blank">Google Docs</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://maps.google.com/" target="blank"><img src="gmaps.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://maps.google.com/" target="blank">Google Maps</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://photos.google.com/" target="blank"><img src="gphotos.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://photos.google.com/" target="blank">Google Photos</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://play.google.com/" target="blank"><img src="gplay.jpg" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://play.google.com/" target="blank">Google Play</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://slides.google.com/" target="blank"><img src="gslides.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://slides.google.com/" target="blank">Google Slides</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://skillsbuild.org/" target="blank"><img src="ibmsb.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://skillsbuild.org/" target="blank">IBM SkillsBuild</a>
            </center>
            </div>
            
            
        </div>

        <div class="apps-container">
            <div class="app-card">
                <center>
                <a href="https://onedrive.live.com/" target="blank"><img src="onedrive.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://onedrive.live.com/" target="blank">OneDrive</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://www.youtube.com" target="blank"><img src="yt.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://www.youtube.com" target="blank">YouTube</a>
            </center>
            </div>
            <div class="app-card">
                <center>
                <a href="https://music.youtube.com" target="blank"><img src="ytmusic.png" class="image-as-circle-icon" alt = "icon"></a>
                <a href="https://music.youtube.com" target="blank">YouTube Music</a>
            </center>
            </div>
        </div>
        

        <br><br><br><center><p class = "title2"><b>Games & Stuff</b></p>
        <div class="cards-container">
            
            <div class="card">
                <center><h1 class = "title-2">Genshin Impact</h1></center>
                <img src="genshin.jpg" class="image-on-half-card" alt = "Pic">
                <p>Step into Teyvat, a vast world teeming with life and flowing with elemental energy.</p>

                <p>You and your sibling arrived here from another world. 
                    Separated by an unknown god, stripped of your powers, and cast into a deep slumber, you now awake to a world very different from when you first arrived.</p>

                <p>Thus begins your journey across Teyvat to seek answers from The Seven â€” the gods of each element. 
                    Along the way, prepare to explore every inch of this wondrous world, join forces with a diverse range of characters, and unravel the countless mysteries that Teyvat holds...</p><br>

                <div class="button-container"><center>
                    <a class = "action-button-tonal-i" href = "https://www.google.com/search?q=genshin impact" target="blank"><b>&nbsp;<i class="fa-brands fa-google"></i>&nbsp;</b></a>
                    <a class = "action-button-tonal-i" href = "https://genshin-impact.fandom.com/wiki/Genshin_Impact_Wiki" target="blank"><b>&nbsp;<i class="fa-solid fa-fire"></i>&nbsp;</b></a>
                    <a class = "action-button-tonal-i" href = "https://www.instagram.com/genshinimpact/" target="blank"><b>&nbsp;<i class="fa-brands fa-instagram"></i>&nbsp;</b></a>
                    <a class = "action-button-tonal-i" href = "https://www.youtube.com/@GenshinImpact" target="blank"><b>&nbsp;<i class="fa-brands fa-youtube"></i>&nbsp;</b></a>
                    <br><br><br>
                    <a class = "action-button-tonal" href = "https://enka.network/u/617741450/" target="blank"><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;View Build Info&nbsp;&nbsp;&nbsp;&nbsp;</b></a>
                    <a class = "action-button-tonal" href = "https://wiki.hoyolab.com/pc/genshin/home" target="blank"><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;HoyoWiki&nbsp;&nbsp;&nbsp;&nbsp;</b></a>
                    <br><br><br>
                    <a class = "action-button-tonal" href = "https://www.hoyolab.com/home" target="blank"><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;HoyoLab&nbsp;&nbsp;&nbsp;&nbsp;</b></a>
                    <a class = "action-button-filled" href = "https://genshin.hoyoverse.com/en/home?utm_source=fab&utm_medium=home" target="blank"><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;Official Website&nbsp;&nbsp;&nbsp;&nbsp;</b></a><br><br> 
                    </center>
                </div>
            </div>

            <div class="card">
                
                <center><h1 class = "title-2">Wuthering Waves</h1></center>
                <img src="wuwa.png" class="image-on-half-card" alt = "Pic">
                <p>Wuthering Waves is a story-rich open-world action RPG with a high degree of freedom. 
                    You wake from your slumber as Rover, 
                    joined by a vibrant cast of Resonators on a journey to reclaim your lost memories and change the world.</p><br>

                <div class="button-container"><center>
                    <a class = "action-button-tonal-i" href = "https://www.google.com/search?q=wuthering waves" target="blank"><b>&nbsp;<i class="fa-brands fa-google"></i>&nbsp;</b></a>
                    <a class = "action-button-tonal-i" href = "https://wutheringwaves.fandom.com/wiki/Wuthering_Waves_Wiki" target="blank"><b>&nbsp;<i class="fa-solid fa-fire"></i>&nbsp;</b></a>
                    <a class = "action-button-tonal-i" href = "https://www.instagram.com/wutheringwaves/" target="blank"><b>&nbsp;<i class="fa-brands fa-instagram"></i>&nbsp;</b></a>
                    <a class = "action-button-tonal-i" href = "https://www.youtube.com/@WutheringWaves" target="blank"><b>&nbsp;<i class="fa-brands fa-youtube"></i>&nbsp;</b></a><br><br><br>
                    
                    <a class = "action-button-filled" href = "https://wutheringwaves.kurogames.com/en/main" target="blank"><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;Official Website&nbsp;&nbsp;&nbsp;&nbsp;</b></a><br><br> 
                    </center>
                </div>
            </div>            
        </div>

        <div class="cards-container">
            <div class="card">
                <center><h1 class = "title-2">Watch Anime!</h1></center>
                <img src="ANIME.png" class="image-on-half-card" alt = "Pic">
                <p>Watch anime and read manga here!</p><br>
                <div class="button-container"><center>
                    <a class = "action-button-tonal-i" onclick="openPopup2()"><b>&nbsp;<i class="fa-solid fa-ellipsis"></i>&nbsp;</b></a><br><br><br>
                    <a class = "action-button-tonal" href = "https://www.crunchyroll.com/newsextension/" target="blank"><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;News&nbsp;&nbsp;&nbsp;&nbsp;</b></a>
                    <a class = "action-button-filled" href = "https://www.crunchyroll.com" target="blank"><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;Open Crunchyroll&nbsp;&nbsp;&nbsp;&nbsp;</b></a><br><br> 
                    </center>
                </div>
            </div>            
            
            <div class="card">
                <center><h1 class = "title-2">Ping Pong</h1></center>
                <img src="pingpong.png" class="image-on-half-card" alt = "Pic">
                <p>This is a simple game of ping pong!</p>
                
                <div class="button-container">
                        <br><a class = "action-button-filled" href = "https://yyounir.github.io/pingpong//pingpong.html" c><b>&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-arrow-up-right-from-square"></i>&nbsp;&nbsp;Open Link&nbsp;&nbsp;&nbsp;&nbsp;</b></a> <br><br> 
                </div>
            </div>
        </div>
    </div>

    

    <div class="search-bar-fixed-wrapper">
        <div class="container">
            

            <div class="input-wrapper">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="Ask Genes anything..."
                    class="search-input"
                    autocomplete="off"
                >
                <div
                    id="suggestionsContainer"
                    class="suggestions-container"
                >
                    
                </div>
            </div>
        </div>
    </div>








    

    <div id="popup" class="popup">
		<div class="popup-content">
			<p class = "menu-text"><b>Cats</b></p>
			<center>
			<img src="kittens.avif" class="long-image-on-popup" alt = "Genes Logo with Genes">
			<p class="p2">Cats will rule the world someday!</p>
            </center>
			<br>
			<div class="flex-container"> 
				<div>
					<a class = "action-button-tonal" onclick="closePopup()"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></a> 
				</div> 
			</div>
		</div>
	</div>

    <div id="popup2" class="popup">
			<div class="popup-content">
				<p class = "menu-text"><b>More Options</b></p>
				<p class="p2">Here are some free options to watch anime or read manga!<p>

				<center>
					<div id = "card-white-section-1-incard">
						<center>			
							<div class="row">

								<div class="action-button-tonal-card"><a href="https://mangapill.com/" target="blank">
									<div class="triple-column-button-1">
										<p class = "action-icon-transparent-L"><a class="fa-solid fa-earth-americas" href="https://mangapill.com/" target="blank"></a></p>
									</div>
									<a href="https://mangapill.com/" target="blank"><p class = "title3"><b>Mangapill<br></b>Read manga here!</p></a>								
								</a></div>

								<div class="action-button-tonal-card"><a href="https://9animetv.to/" target="blank">
									<div class="triple-column-button-1">
										<p class = "action-icon-transparent-L"><a class="fa-solid fa-earth-americas" href="https://9animetv.to/" target="blank"></a></p>
									</div>
									<a href="https://9animetv.to/" target="blank"><p class = "title3"><b>9animetv.to<br></b>9animetv.to</p></a>								
								</a></div>
                                <div class="action-button-tonal-card"><a href="https://hianiwatch.pages.dev/" target="blank">
									<div class="triple-column-button-1">
										<p class = "action-icon-transparent-L"><a class="fa-solid fa-earth-americas" href="https://hianiwatch.pages.dev/" target="blank"></a></p>
									</div>
									<a href="https://hianiwatch.pages.dev/" target="blank"><p class = "title3"><b>AnimixPlay<br></b>hianiwatch.pages.dev</p></a>								
								</a></div>
								<br>
							</div>
						</center>	
					</div>
				</center>
					
				<br>
				<div class="flex-container"> 
					<div>
						<a class = "action-button-tonal" onclick="closePopup2()"><b>&nbsp;&nbsp;&nbsp;Close&nbsp;&nbsp;&nbsp;</b></a>
					</div> 
				</div>
			</div>
		</div>









    <script>

        // Pop-up

        function openPopup() {
            document.getElementById('popup').style.display = 'flex';
        }

        function openPopup2() {
            document.getElementById('popup2').style.display = 'flex';
        }

        function openPopup3() {
            document.getElementById('popup3').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }

        function closePopup2() {
            document.getElementById('popup2').style.display = 'none';
        }
        function closePopup3() {
            document.getElementById('popup3').style.display = 'none';
        }
        // // Get references to the DOM elements
        // const searchInput = document.getElementById('searchInput');
        // const suggestionsContainer = document.getElementById('suggestionsContainer');
        // // const searchResults = document.getElementById('searchResults'); // No longer directly used for display
        // // const searchTermSpan = document.getElementById('searchTerm'); // No longer directly used for display

        // // Mock data for suggestions. In a real application, this would come from an API.
        // const allSuggestions = [
        //     'Apple', 'Banana', 'Cherry', 'Cats', 'Meow', 'Date', 'Elderberry',
        //     'Fig', 'Grape', 'Honeydew', 'Kiwi', 'Lemon', 'Kittens',
        //     'Mango', 'Nectarine', 'Orange', 'Papaya', 'Quince',
        //     'Raspberry', 'Strawberry', 'Tangerine', 'Ugli Fruit', 'Vanilla Bean',
        //     'Watermelon', 'Xigua', 'Yellow Passion Fruit', 'Zucchini',
        //     'Artichoke', 'Blueberry', 'Cantaloupe', 'Durian', 'Eggplant',
        //     'Fennel', 'Guava', 'Huckleberry', 'Iceberg Lettuce', 'Jalapeno',
        //     'Kale', 'Lime', 'Mushroom', 'Napa Cabbage', 'Olive',
        //     'Peach', 'Quinoa', 'Radish', 'Spinach', 'Tomato',
        //     'Ume', 'Vinegar', 'Wasabi', 'Xanthan Gum', 'Yam', 'Zest', 'CUNY Brightspace', 'Gmail',
        //     'Google Drive', 'Youtube', 'YouTube Music'
        // ];

        // /**
        //  * Filters suggestions based on the user's input.
        //  * @param {string} query The search query.
        //  * @returns {string[]} An array of matching suggestions.
        //  */
        // function filterSuggestions(query) {
        //     if (!query) {
        //         return []; // Return empty array if query is empty
        //     }
        //     const lowerCaseQuery = query.toLowerCase();
        //     return allSuggestions.filter(suggestion =>
        //         suggestion.toLowerCase().includes(lowerCaseQuery)
        //     ).slice(0, 8); // Limit to 8 suggestions for brevity
        // }

        // /**
        //  * Performs a Google search with the given term.
        //  * @param {string} term The search term.
        //  */
        // function performGoogleSearch(term) {
        //     if (term.trim() !== '') {
        //         const googleSearchUrl = `https://www.bing.com/search?q=${encodeURIComponent(term)}`;
        //         window.location.href = googleSearchUrl; // Redirect to Google search
        //     }
        // }

        // /**
        //  * Displays the suggestions in the suggestions container.
        //  * @param {string[]} suggestions An array of suggestions to display.
        //  */
        // function displaySuggestions(suggestions) {
        //     suggestionsContainer.innerHTML = ''; // Clear previous suggestions
        //     if (suggestions.length > 0) {
        //         suggestions.forEach(suggestion => {
        //             const suggestionItem = document.createElement('div');
        //             suggestionItem.classList.add('suggestion-item');
        //             suggestionItem.textContent = suggestion;
        //             // Add click listener to each suggestion item
        //             suggestionItem.addEventListener('click', () => {
        //                 searchInput.value = suggestion; // Set search input value
        //                 suggestionsContainer.classList.remove('show'); // Hide suggestions
        //                 performGoogleSearch(suggestion); // Perform Google search
        //             });
        //             suggestionsContainer.prepend(suggestionItem); // Prepend to display from bottom up
        //         });
        //         suggestionsContainer.classList.add('show'); // Show the container
        //     } else {
        //         suggestionsContainer.classList.remove('show'); // Hide if no suggestions
        //     }
        // }

        // // Event listener for input changes in the search bar
        // searchInput.addEventListener('input', (event) => {
        //     const query = event.target.value.trim(); // Get current input value
        //     const filtered = filterSuggestions(query); // Filter suggestions
        //     displaySuggestions(filtered); // Display them
        //     // searchResults.classList.remove('show'); // No longer needed
        // });

        // // Event listener for 'Enter' key press on the search input
        // searchInput.addEventListener('keypress', (event) => {
        //     if (event.key === 'Enter') {
        //         const query = searchInput.value.trim();
        //         performGoogleSearch(query); // Perform Google search
        //         suggestionsContainer.classList.remove('show'); // Hide suggestions after search
        //     }
        // });

        // // Event listener to hide suggestions when clicking outside the search area
        // document.addEventListener('click', (event) => {
        //     if (!searchInput.contains(event.target) && !suggestionsContainer.contains(event.target)) {
        //         suggestionsContainer.classList.remove('show');
        //     }
        // });
    
        // Get references to the DOM elements
        const searchInput = document.getElementById('searchInput');
        const suggestionsContainer = document.getElementById('suggestionsContainer');
        const geminiResponseContainer = document.getElementById('geminiResponseContainer');

        // Mock data for suggestions. In a real application, this would come from an API.
        const allSuggestions = [
            'What is the capital of France?',
            'Explain quantum physics simply.',
            'Tell me a fun fact about cats.',
            'How does photosynthesis work?',
            'Who wrote Romeo and Juliet?',
            'What is the highest mountain in the world?',
            'Define artificial intelligence.',
            'Suggest a recipe for pasta.',
            'What are the benefits of exercise?',
            'History of the internet.'
        ];

        /**
         * Filters suggestions based on the user's input.
         * @param {string} query The search query.
         * @returns {string[]} An array of matching suggestions.
         */
        function filterSuggestions(query) {
            if (!query) {
                return []; // Return empty array if query is empty
            }
            const lowerCaseQuery = query.toLowerCase();
            return allSuggestions.filter(suggestion =>
                suggestion.toLowerCase().includes(lowerCaseQuery)
            ).slice(0, 8); // Limit to 8 suggestions for brevity
        }

        /**
         * Fetches a response from the Gemini API.
         * @param {string} prompt The prompt to send to Gemini.
         */
        async function getGeminiResponse(prompt) {
            if (prompt.trim() === '') {
                geminiResponseContainer.textContent = "Please enter a query to get an AI response.";
                return;
            }

            // Show loading spinner
            geminiResponseContainer.innerHTML = '<div class="loading-spinner"></div><p style="margin-top: 10px;">  Generating response...</p>';

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });

            const payload = { contents: chatHistory };
            const apiKey = "AIzaSyCbcWqrvkmlzvTDfbsaGto2I9hBmtIxzNU"; // Canvas will automatically provide the API key at runtime
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    geminiResponseContainer.textContent = text; // Display the response
                } else {
                    geminiResponseContainer.textContent = "Sorry, I couldn't get a response. Please try again.";
                    console.error("Gemini API response structure unexpected:", result);
                }
            } catch (error) {
                geminiResponseContainer.textContent = "An error occurred while fetching the response. Please check your network connection or try again later.";
                console.error("Error calling Gemini API:", error);
            }
        }

        /**
         * Displays the suggestions in the suggestions container.
         * @param {string[]} suggestions An array of suggestions to display.
         */
        function displaySuggestions(suggestions) {
            suggestionsContainer.innerHTML = ''; // Clear previous suggestions
            if (suggestions.length > 0) {
                suggestions.forEach(suggestion => {
                    const suggestionItem = document.createElement('div');
                    suggestionItem.classList.add('suggestion-item');
                    suggestionItem.textContent = suggestion;
                    // Add click listener to each suggestion item
                    suggestionItem.addEventListener('click', () => {
                        searchInput.value = suggestion; // Set search input value
                        suggestionsContainer.classList.remove('show'); // Hide suggestions
                        getGeminiResponse(suggestion); // Get Gemini response
                    });
                    suggestionsContainer.prepend(suggestionItem); // Prepend to display from bottom up
                });
                suggestionsContainer.classList.add('show'); // Show the container
            } else {
                suggestionsContainer.classList.remove('show'); // Hide if no suggestions
            }
        }

        // Event listener for input changes in the search bar
        searchInput.addEventListener('input', (event) => {
            const query = event.target.value.trim(); // Get current input value
            const filtered = filterSuggestions(query); // Filter suggestions
            displaySuggestions(filtered); // Display them
        });

        // Event listener for 'Enter' key press on the search input
        searchInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                const query = searchInput.value.trim();
                getGeminiResponse(query); // Get Gemini response
                suggestionsContainer.classList.remove('show'); // Hide suggestions after search
            }
        });

        // Event listener to hide suggestions when clicking outside the search area
        document.addEventListener('click', (event) => {
            if (!searchInput.contains(event.target) && !suggestionsContainer.contains(event.target)) {
                suggestionsContainer.classList.remove('show');
            }
        });
    </script>

</body>
</html>
